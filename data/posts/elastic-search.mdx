---
title: "Introducci√≥n b√°sica a ElasticSearch"
date: "2021-07-11"
preview: "/assets/tech/elasticsearch-logo.svg"
tags:
  - "üë®‚Äçüíª Aprendizaje"
---

# Introducci√≥n b√°sica a ElasticSearch

El ultimo mes estuve trabajando con elasticsearch, se me ha ocurrido hacer una
introducci√≥n b√°sica porque he visto a muchos de mis compa√±eros qu√© les puede
interesar.

## ¬øQu√© es y por qu√© surge?

El surgimiento de Elasticsearch se debi√≥ a problemas de escalabilidad, este es
un motor de b√∫squeda dise√±ado para escalar horizontalmente, de forma que se
puedan ir a√±adiendo m√°s nodos al cl√∫ster a medida que aumente el volumen de
datos requerido.

## Caracter√≠sticas

Aparte de la caracter√≠stica fundamental de la escalabilidad horizontal, otras
caracter√≠sticas de Elasticsearch son:

- Tiempos pr√≥ximos al tiempo real: latencias menores que 1 segundo.
- Tolerancia a fallos: hay alta disponibilidad de los datos al replicar los
  datos en distintos nodos.
- B√∫squedas de texto completo: capaz de analizar todo el contenido de documentos
  y no solo campos concretos.
- Orientado a documentos JSON
- No requiere esquemas, se auto-detectan los tipos de los campos de los
  documentos
- Desarrollo amigable al disponer de APIs sencillas

## B√∫squedas

Queries: pensadas para b√∫squedas sobre frases. Mide cu√°nto se parece frase
buscada a la almacenada.

Filtros: para b√∫squedas binarias (s√≠/no). M√°s r√°pidas y se cachean en memoria.
Utilizamos campos no sean texto.

API unificada: filter se usa dentro de query. Podemos tener query s√≥lo con
filter o parte con score y parte con filter

Frases se dividen en tokens, en min√∫scula: - ‚ÄúPedro Santos Gonz√°lez‚Äù
[‚Äúpedro‚Äù,‚Äùsantos‚Äù,‚Äùgonz√°lez‚Äù]

Al hacer consulta ‚ÄúPedro Garc√≠a‚Äù, token ‚Äúpedro‚Äù coincide: asigna una puntuaci√≥n
aunque no coincida exactamente.

## Sintaxis de la query

```http
GET indice/tipo/_search
```

```json
{
    {
        "query": {
            <tipoClausula>:{<campoConsultado>:<valor>}
        }
    }
}
```

## Sintaxis de filters como √∫nico elemento de la query

```http
GET indice/tipo/_search
```

```json
{
    {
        "query": {
            "bool":{
                "filter"{
                    <tipoClausula>:{<campoConsultado>:<valor>}
                }
            }
        }
    }
}
```

## Cl√°usulas comunes en queries

- Campo igual a valor: term
- Texto contiene palabra (token): match
- Texto contiene palabras en orden dado: match_phrase
- Campo en un rango: (gt, gte, lt, lte)
- B√∫squedas compuestas: bool
- Operador OR `<>` should (condicion1 || condicion2)
- Operador AND `<>` must (condicion1 && condicion2)
- Tambi√©n agregaciones (aggs, como media, avg)
